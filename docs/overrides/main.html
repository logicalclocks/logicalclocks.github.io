{% extends "base.html" %}

{% block outdated %}
You're not viewing the latest version of the documentation.
<a href="{{ '../' ~ base_url }}">
    <strong>Click here to go to latest.</strong>
</a>
{% endblock %}

{% block extrahead %}
  {{ super() }}
  {% if page and page.meta and page.meta.full_width %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.body.setAttribute('data-full-width', 'true');
      });
    </script>
  {% endif %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ base_url }}/js/layout_improvement.js"></script>
  <script src="{{ base_url }}/js/background-animation.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create custom version selector
      const header = document.querySelector('.md-header__inner');
      if (header) {
        const versionSelect = document.createElement('div');
        versionSelect.className = 'md-version-select';
        
        const versionCurrent = document.createElement('span');
        versionCurrent.className = 'md-version-current';
        // Always display "latest" as current version
        versionCurrent.textContent = 'latest';
        
        const versionDropdown = document.createElement('div');
        versionDropdown.className = 'md-version-dropdown';
        
        // Define correct documentation URLs
        const versionUrls = [
          { name: '4.1', url: 'https://docs.hopsworks.ai/latest/' },
          { name: '4.0', url: 'https://docs.hopsworks.ai/4.0/' }, 
          { name: '3.0', url: 'https://docs.hopsworks.ai/3.0/' }
        ];
        
        versionUrls.forEach(function(version) {
          const link = document.createElement('a');
          link.href = version.url;
          link.textContent = version.name;
          versionDropdown.appendChild(link);
        });
        
        versionSelect.appendChild(versionCurrent);
        versionSelect.appendChild(versionDropdown);
        
        // Insert before search button
        const searchButton = header.querySelector('.md-header__button[for="__search"]');
        if (searchButton) {
          header.insertBefore(versionSelect, searchButton);
        }
      }
    });
  </script>
{% endblock %}