# How To Configure a Git Provider

## Introduction

When you perform Git operations on Hopsworks that need to interact with the remote repository, Hopsworks relies on the Git HTTPS protocol to perform those operations. Authentication with the remote repository happens through a token generated by the Git repository hosting service (GitHub, GitLab, BitBucket).

!!! notice "Token permissions"
    The token permissions should grant access to public and private repositories including read and write access to repository contents and commit statuses. 
    If you are using the new GitHub access tokens, make sure you choose the correct `Resource owner` when generating the token for the repositories you will want to clone. For the `Repository permissions` of the new GitHub fine-grained token, you should atleast give read and write access to `Commit statuses` and `Contents`.

## UI

Documentation on how to generate a token for the supported Git hosting services is available here:

- [GitHub](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)
- [GitLab](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html)
- [BitBucket](https://confluence.atlassian.com/bitbucketserver/http-access-tokens-939515499.html)
### Step 1: Navigate to Git Providers

You can access the `Git Providers` page of your Hopsworks cluster by clicking on your name, in the top right corner, and choosing `Account Settings` from the dropdown menu. The `Git providers` section displays which providers have been already configured and can be used to clone new repositories.

<p align="center">
  <figure>
    <img src="../../../../assets/images/guides/git/git_provider_not_configured.png" alt="Git provider configuration list">
    <figcaption>Git provider configuration list</figcaption>
  </figure>
</p>

### Step 2: Configure a provider

Click on `Edit Configuration` to change a provider username or token, or to configure a new provider.

Tick the checkbox next to the provider you want to configure and insert the username and the token to use for that provider.

<p align="center">
  <figure>
    <img src="../../../../assets/images/guides/git/configure_git_provider.png" alt="Git provider configuration">
    <figcaption>Git provider configuration</figcaption>
  </figure>
</p>

Click `Create Configuration` to save the configuration.

### Step 3: Provider is configured

The configured provider should now be marked as configured.

<p align="center">
  <figure>
    <img src="../../../../assets/images/guides/git/git_provider_configured.png" alt="Git provider configured">
    <figcaption>Git provider configured</figcaption>
  </figure>
</p>

## Code
You can also configure a git provider using the hopsworks git API in python.
### Step 1: Get the git API

```python

import hopsworks

project = hopsworks.login()

git_api = project.get_git_api()

```

### Step 2: Configure git provider

```python

PROVIDER="GitHub"
GITHUB_USER="my_user"
API_TOKEN="my_token"

git_api.set_provider(PROVIDER, GITHUB_USER, API_TOKEN)

```

### API Reference

[GitProvider](https://docs.hopsworks.ai/hopsworks-api/{{{ hopsworks_version }}}/generated/api/git_provider/)

## Going Further

You can now use the credentials to [clone a repository](clone_repo.md) from the configured provider.
